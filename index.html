<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Coordenadas Polares AR - Quest 3</title>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/webxr/ARButton.js"></script>

<style>
    body { margin: 0; overflow: hidden; }
</style>
</head>
<body>

<script type="module">

import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js";
import { ARButton } from "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/webxr/ARButton.js";

//////////////////////////////////////////////
// ESCENA + RENDER MIXED REALITY (AR)
//////////////////////////////////////////////

const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(
    70,
    window.innerWidth / window.innerHeight,
    0.01,
    1000
);

const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.xr.enabled = true;
renderer.xr.setReferenceSpaceType('local-floor');
document.body.appendChild(renderer.domElement);

document.body.appendChild(
    ARButton.createButton(renderer, {
        requiredFeatures: ["hit-test", "local-floor"]
    })
);

//////////////////////////////////////////////
// RESTO DE TU CÃ“DIGO (no cambia)
//////////////////////////////////////////////

const polarGroup = new THREE.Group();

for (let r = 0.5; r <= 5; r += 0.5) {
    const pts = [];
    for (let deg = 0; deg < 360; deg++) {
        const rad = THREE.MathUtils.degToRad(deg);
        pts.push(new THREE.Vector3(
            r * Math.cos(rad),
            0,
            r * Math.sin(rad)
        ));
    }
    const geometry = new THREE.BufferGeometry().setFromPoints(pts);
    const material = new THREE.LineBasicMaterial({ color: 0x00ffff });
    const circle = new THREE.LineLoop(geometry, material);
    polarGroup.add(circle);
}

for (let deg = 0; deg < 360; deg += 15) {
    const rad = THREE.MathUtils.degToRad(deg);
    const points = [
        new THREE.Vector3(0, 0, 0),
        new THREE.Vector3(5 * Math.cos(rad), 0, 5 * Math.sin(rad))
    ];
    const geom = new THREE.BufferGeometry().setFromPoints(points);
    const mat = new THREE.LineBasicMaterial({ color: 0xff00aa });
    const line = new THREE.Line(geom, mat);
    polarGroup.add(line);
}

scene.add(polarGroup);

renderer.setAnimationLoop(() => {
    renderer.render(scene, camera);
});

</script>

</body>
</html>
